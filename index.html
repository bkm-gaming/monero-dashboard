<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Monero Dashboard</title>
<style>
body {
  margin:0; padding:0;
  font-family:"Segoe UI", Arial, sans-serif;
  overflow:hidden;
  background: linear-gradient(-45deg, #1a1aff, #9d00ff, #1a1aff, #9d00ff);
  background-size: 400% 400%;
  animation: gradientBG 60s ease infinite;
  transition: background 1s ease-in-out;
  -webkit-tap-highlight-color: transparent;
}
@keyframes gradientBG {
  0% {background-position:0% 50%;}
  50% {background-position:100% 50%;}
  100% {background-position:0% 50%;}
}
canvas {position:fixed; top:0; left:0; width:100%; height:100%; z-index:0;}

.window {
  position:relative; z-index:1;
  max-width:600px;
  margin:20px auto;
  background: rgba(230,236,245,0.85);
  border-radius:12px;
  padding:20px;
  box-shadow:0 8px 25px rgba(0,0,0,0.15);
  opacity:0; transform:translateY(50px);
  animation: fadeInUp 1s forwards;
  transition: transform 0.3s, box-shadow 0.3s;
}
.window:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}
@keyframes fadeInUp {to {opacity:1; transform:translateY(0);}}

.header {
  display:flex;
  justify-content:center;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;
  margin-bottom:10px;
  text-align:center;
}
h1 {
  margin:0;
  color:#0a5db6;
  text-shadow: 0 0 5px #fff;
  font-size:1.8rem;
  white-space:nowrap;
}

button.gradient-btn {
  background: linear-gradient(90deg, #1a1aff, #9d00ff);
  color:white;
  border:none;
  border-radius:8px;
  width:38px;
  height:38px;
  font-size:20px;
  cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
  transition:all 0.3s;
  flex-shrink:0;
}
button.gradient-btn:hover {
  transform:scale(1.1);
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
  filter:brightness(1.2);
}
button.gradient-btn:active {
  transform:scale(0.95);
}

.box {
  background:rgba(255,255,255,0.9);
  border-radius:10px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  transition:transform 0.3s,box-shadow 0.3s,background 0.3s;
  opacity:0; transform:translateY(20px);
  animation:fadeInBox 0.8s forwards;
}
.box:nth-child(2){animation-delay:0.2s;}
.box:nth-child(3){animation-delay:0.4s;}
.box:nth-child(4){animation-delay:0.6s;}
@keyframes fadeInBox {to {opacity:1; transform:translateY(0);}}
.box:hover {
  transform:scale(1.05);
  box-shadow:0 8px 24px rgba(0,0,0,0.2);
  background:rgba(255,255,255,0.95);
}

.small {font-size:13px; color:#4b6b85;}
.big {font-size:28px; font-weight:700; color:#042b4a; transition:all 0.5s; text-shadow:0 0 2px #fff;}
.muted {font-size:16px; color:#000; font-weight:700; text-align:right; transition:all 0.5s; text-shadow:0 0 2px #fff;}
.footer {margin-top:12px; font-size:13px; color:#4b6b85; text-align:center;}
.time {text-align:center; font-size:18px; color:#000; font-weight:700; margin-bottom:12px;}

@media (max-width:480px){
  h1 {font-size:1.5rem;}
  button.gradient-btn {width:34px; height:34px; font-size:18px;}
  .big {font-size:24px;}
  .muted {font-size:14px;}
  .time {font-size:16px;}
  .box {padding:12px;}
  .header {gap:6px;}
}
</style>
</head>
<body>
<canvas id="bgCanvas"></canvas>

<div class="window">
  <div class="header">
    <h1>Monero Dashboard</h1>
    <button class="gradient-btn" onclick="cycleGradient()">ðŸŽ¨</button>
  </div>

  <div class="time" id="realtime">â€”</div>

  <div class="box">
    <div class="small">Miner Hashrate</div>
    <div id="walletHash" class="big">â€” kH/s</div>
  </div>

  <div class="box">
    <div class="small">Balance</div>
    <div id="xmr" class="big">â€” XMR</div>
    <div class="muted" id="fiat">â€” â‚¬ | â€” USDT</div>
  </div>

  <div class="box">
    <div class="small">GeschÃ¤tzter XMR-Ertrag</div>
    <div id="xmrPerHour" class="big">â€” XMR/h</div>
    <div id="xmrPerDay" class="big">â€” XMR/Tag</div>
  </div>

  <div class="footer">Erstellt von BKM_Gaming.</div>
</div>

<script>
const WALLET = "4BJs6dWYWVrRJtxuAmGREsMZcg8nXWk4oPENJEKVnVds6h1MeDuKPMuVEVYfChCjaY4mc8qEjdHdbAhWj21JBghv1xmsZUt";
const REFRESH_WALLET = 10000;
const REFRESH_PRICE = 60000;
const WALLET_STATS_API = `https://api.moneroocean.stream/miner/${WALLET}/stats`;
const PRICE_API = "https://api.coingecko.com/api/v3/simple/price?ids=monero&vs_currencies=eur,usd";
const POOL_STATS_API = "https://api.moneroocean.stream/pool/stats";

let lastPrice = { eur:0, usd:0 };
let lastPriceTime = 0;
let displayedHash = 0;
let displayedXMR = 0;
let displayedXMRHour = 0;
let displayedXMRDay = 0;

function safeNumber(v){ return (typeof v==='number' && !isNaN(v))?v:0; }
async function fetchJson(url){
  try { const r = await fetch(url,{cache:"no-store"}); if(r.ok) return await r.json(); }
  catch(e){ console.warn("Fetch failed:", url, e); }
  return null;
}

function animateValueGlow(id, current, target, decimals=2, unit=""){
  const elem = document.getElementById(id);
  const diff = target - current;
  const step = diff/10;
  let val = current;
  let count = 0;
  const interval = setInterval(()=>{
    val += step;
    count++;
    if(count>=10){ val = target; clearInterval(interval); }
    elem.textContent = val.toFixed(decimals) + unit;
    elem.style.textShadow = "0 0 8px #ff0";
    setTimeout(()=>{ elem.style.textShadow="0 0 2px #fff"; }, 200);
  }, 50);
}

async function updateWallet(){
  const stats = await fetchJson(WALLET_STATS_API) || {};
  let hash = safeNumber(stats.hash || 0);
  hash *= 0.95 + Math.random()*0.1;
  const amtDue = safeNumber(stats.amtDue || stats.amount || stats.balance || 0);
  const xmr = amtDue/1e12;

  if(Date.now()-lastPriceTime>REFRESH_PRICE){
    const priceResp = await fetchJson(PRICE_API);
    if(priceResp && priceResp.monero){
      lastPrice.eur = safeNumber(priceResp.monero.eur);
      lastPrice.usd = safeNumber(priceResp.monero.usd);
      lastPriceTime = Date.now();
    }
  }

  const eurVal = xmr*lastPrice.eur;
  const usdVal = xmr*lastPrice.usd;

  const poolStats = await fetchJson(POOL_STATS_API) || {};
  const poolHashrate = safeNumber(poolStats.hashrate || 1e9); 
  const blockReward = safeNumber(poolStats.reward || 0.6);
  const blockTimeSec = 120;
  const blocksPerHour = 3600 / blockTimeSec;
  const xmrPerHour = (hash / poolHashrate) * blockReward * blocksPerHour;
  const xmrPerDay = xmrPerHour * 24;

  animateValueGlow("walletHash", displayedHash, hash/1000,2," kH/s");
  animateValueGlow("xmr", displayedXMR, xmr,8," XMR");
  document.getElementById("fiat").textContent = eurVal.toFixed(2)+" â‚¬ | "+usdVal.toFixed(2)+" USDT";
  animateValueGlow("xmrPerHour", displayedXMRHour, xmrPerHour,8," XMR/h");
  animateValueGlow("xmrPerDay", displayedXMRDay, xmrPerDay,8," XMR/d");

  displayedHash = hash/1000;
  displayedXMR = xmr;
  displayedXMRHour = xmrPerHour;
  displayedXMRDay = xmrPerDay;
}

function updateTime(){
  const now = new Date();
  document.getElementById("realtime").textContent = now.toLocaleDateString()+" "+now.toLocaleTimeString();
}

updateWallet();
setInterval(updateWallet, REFRESH_WALLET);
updateTime();
setInterval(updateTime,1000);

// Hintergrund Partikel-Effekt
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let w, h;
function resizeCanvas(){ w=canvas.width=window.innerWidth; h=canvas.height=window.innerHeight; }
window.addEventListener('resize',resizeCanvas);
resizeCanvas();

const particles = [];
for(let i=0;i<50;i++){
  particles.push({
    x:Math.random()*w,
    y:Math.random()*h,
    r:Math.random()*3+1,
    dx:(Math.random()-0.5)*0.5,
    dy:(Math.random()-0.5)*0.5
  });
}

function animateParticles(){
  ctx.clearRect(0,0,w,h);
  particles.forEach(p=>{
    p.x += p.dx; p.y += p.dy;
    if(p.x<0||p.x>w) p.dx*=-1;
    if(p.y<0||p.y>h) p.dy*=-1;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle='rgba(255,255,255,0.2)';
    ctx.fill();
  });
  requestAnimationFrame(animateParticles);
}
animateParticles();

// Farbverlauf-Wechsel
const gradients = [
  "linear-gradient(-45deg, #1a1aff, #9d00ff, #1a1aff, #9d00ff)",
  "linear-gradient(-45deg, #ff0, #ffa500, #ff4500, #ff0)",
  "linear-gradient(-45deg, #00ff6a, #00aaff, #00ff6a, #00aaff)",
  "linear-gradient(-45deg, #ff1493, #ff66cc, #ff1493, #ffffff)",
  "linear-gradient(-45deg, #ffffff, #cccccc, #ffffff, #999999)"
];
let gradientIndex = 0;
function cycleGradient() {
  gradientIndex = (gradientIndex + 1) % gradients.length;
  document.body.style.background = gradients[gradientIndex];
  document.body.style.backgroundSize = "400% 400%";
  document.body.style.animation = "gradientBG 60s ease infinite";
}
</script>
</body>
</html>
